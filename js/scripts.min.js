!function(e) {
    e("html").removeClass("no-js"),
    e("header a").click(function(i) {
        if (!e(this).hasClass("no-scroll")) {
            i.preventDefault();
            var t = e(this).attr("href")
              , a = e(t).offset().top;
            e("html, body").animate({
                scrollTop: a + "px"
            }, {
                duration: 300
            }, Math.abs(window.pageYOffset - e(t).offset().top) / 1),
            e("header").hasClass("active") && e("header, body").removeClass("active")
        }
    }),
    e("#to-top").click(function() {
        e("html, body").animate({
            scrollTop: 0
        }, 500)
    }),
    e("#lead-down span").click(function() {
        var i = e("#lead").next().offset().top;
        e("html, body").animate({
            scrollTop: i + "px"
        }, 500)
    }),
    e("#experience-timeline").each(function() {
        $this = e(this),
        $userContent = $this.children("div"),
        $userContent.each(function() {
            e(this).addClass("vtimeline-content").wrap('<div class="vtimeline-point"><div class="vtimeline-block"></div></div>')
        }),
        $this.find(".vtimeline-point").each(function() {
            e(this).prepend('<div class="vtimeline-icon"><i class="fa fa-map-marker"></i></div>')
        }),
        $this.find(".vtimeline-content").each(function() {
            var i = e(this).data("date");
            i && e(this).parent().prepend('<span class="vtimeline-date">' + i + "</span>")
        })
    }),
    e("#mobile-menu-open").click(function() {
        e("header, body").addClass("active")
    }),
    e("#mobile-menu-close").click(function() {
        e("header, body").removeClass("active")
    })
}(jQuery),
particlesJS.load("particles-js", "assets/particles.json", function() {
    console.log("callback - particles.js config loaded")
});

var floatingButtonContainer = document.querySelector('.floating-button-div');
var scrollY = window.scrollY;


window.addEventListener('scroll', function() {
  scrollY = window.scrollY;
  floatingButtonContainer.style.top = scrollY + window.innerHeight - 150 + 'px';
});   


document.addEventListener('DOMContentLoaded', () => {
    const sectionIds = ['lead', 'companies', 'education', 'projects', 'skills', 'contact'];
    const sections = sectionIds.map(id => document.getElementById(id));
    const navLinks = document.querySelectorAll('header ul li a');

    function removeActiveClasses() {
        navLinks.forEach(link => link.parentElement.classList.remove('active'));
    }

    function handleScroll() {
        let currentSectionId = '';

        sections.forEach(section => {
            if (!section) return;
            const rect = section.getBoundingClientRect();
            if (rect.top <= window.innerHeight / 2 && rect.bottom >= window.innerHeight / 2) {
                currentSectionId = section.id;
            }
        });

        removeActiveClasses();

        if (currentSectionId) {
            const activeLink = document.querySelector(`header ul li a[href="#${currentSectionId}"]`);
            if (activeLink) {
                activeLink.parentElement.classList.add('active');
            }
        }
    }

    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href').substring(1);
            const targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });

    window.addEventListener('scroll', handleScroll);
    handleScroll(); 
});
